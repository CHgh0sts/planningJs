(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1819:function(e,t,a){Promise.resolve().then(a.bind(a,5261)),Promise.resolve().then(a.bind(a,9876)),Promise.resolve().then(a.bind(a,9261)),Promise.resolve().then(a.bind(a,5140)),Promise.resolve().then(a.bind(a,4763))},5261:function(e,t,a){"use strict";a.r(t),a.d(t,{ActualDate:function(){return l}});var r=a(7437),s=a(2265),n=a(6526);let l=()=>{let{actualDate:e,setActualDate:t}=(0,s.useContext)(n.k);return(0,r.jsx)("div",{children:(0,r.jsxs)("h1",{children:["Heure actuelle :"," ",e?"".concat(e.toLocaleDateString()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds()):"Chargement..."]})})}},1033:function(e,t,a){"use strict";a.d(t,{j:function(){return l}});var r=a(7437),s=a(2265),n=a(6526);let l=e=>{let{...t}=e,{calendarView:a,setListEvent:l,rightBar:o,setRightBar:i}=(0,s.useContext)(n.k),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),f=(0,s.useRef)(null),h=(0,s.useRef)(0),{eventIndex:p,className:x,event:g,formattedHour:v,formattedMinutes:j,style:y,heightEditable:w,eventKey:b}=t,N=async e=>{try{let t=await fetch("/api/eventsUpdate",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement");let a=await t.json();return l(e=>e.map(e=>e.id===a.id?a:e)),a}catch(e){return console.error(e),[]}},D=async e=>{let t=0,r=0,s=!1;if("week"===a||"day"===a){let a=document.querySelector(".hours-container");if(a){let s=a.getBoundingClientRect(),n=Math.floor((e.clientY-s.top)/s.height*48);t=Math.floor(n/2),r=n%2*30}t>=24&&(s=!0,t=0,r=0),t<0&&(t=0,r=0),r<0&&(r*=-1)}console.log("".concat(t,":").concat(r)),("week"===a||"day"===a)&&("Top"===f.current&&await N({debutAt:"".concat(t,":").concat(r),id:b}),"Bottom"===f.current&&await N({finAt:"".concat(t,":").concat(r),afterDay:s,id:b}))},C=e=>{m(!0),f.current=e.target.classList[1],c(!0),document.addEventListener("mousemove",D),document.addEventListener("mouseup",T)},T=()=>{c(!1),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",T),setTimeout(()=>m(!1),0)};(0,s.useEffect)(()=>()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",T)},[]);let S=(e,t)=>{let a=e.target.getBoundingClientRect();h.current=e.clientY-a.top,e.dataTransfer.setData("eventId",t.id);let r=new Date(t.date);isNaN(r)||e.dataTransfer.setData("oldDay",r.getUTCDate()),document.querySelectorAll(".event").forEach(t=>{t!==e.target?t.classList.add("notDrag"):t.classList.add("isDrag")})},U=(e,t)=>{e.stopPropagation(),console.log("event Dbl Click",t)},k=(e,t)=>{u?m(!1):i(t.id)};return(0,r.jsxs)("div",{style:y,className:x,draggable:"true",onDragStart:e=>S(e,g),onDragEnd:()=>{document.querySelectorAll(".event").forEach(e=>{e.classList.remove("notDrag"),e.classList.remove("isDrag")})},onDoubleClick:e=>U(e,g),onClick:e=>k(e,g),children:[w&&(0,r.jsx)("div",{className:"btnSize Top",draggable:"false",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),C(e)},onMouseLeave:()=>T()}),(0,r.jsxs)("p",{children:[!g.fullDay&&(0,r.jsxs)("span",{children:[v,"h",j," - "]}),g.title]}),w&&(0,r.jsx)("div",{className:"btnSize Bottom",draggable:"false",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),C(e)},onMouseLeave:()=>T()})]},p)}},9876:function(e,t,a){"use strict";a.d(t,{LeftBar:function(){return j}});var r=a(7437),s=a(2265),n=a(3134),l=a(653),o=a(4508);let i=n.fC,d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.ck,{ref:t,className:(0,o.cn)("border-b",a),...s})});d.displayName="AccordionItem";let c=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsx)(n.h4,{className:"flex",children:(0,r.jsxs)(n.xz,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all [&[data-state=open]>svg]:rotate-180",a),...i,children:[s,(0,r.jsx)(l.v4q,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});c.displayName=n.xz.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsx)(n.VY,{ref:t,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,r.jsx)("div",{className:(0,o.cn)("pb-4 pt-0",a),children:s})})});u.displayName=n.VY.displayName;var m=a(4309),f=a(2869);function h(e){let{className:t,classNames:a,showOutsideDays:s=!0,...n}=e;return(0,r.jsx)(m._W,{showOutsideDays:s,className:(0,o.cn)("",t),classNames:{months:"flex flex-col space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,f.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,o.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===n.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,o.cn)((0,f.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-blue-500 text-primary-foreground hover:bg-blue-600 hover:text-primary-foreground focus:bg-blue-600 focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(l.wyc,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(l.XCv,{className:"h-4 w-4"})}},...n})}h.displayName="Calendar";var p=a(6526),x=a(5186),g=a(6815);let v=()=>{let{idUserList:e,setIdUserList:t,ListUsers:a,setListUsers:n,me:l}=(0,s.useContext)(p.k),[o,i]=(0,s.useState)(""),[d,c]=(0,s.useState)({}),u=(e,a)=>{c(t=>({...t,[e]:!t[e]})),d[e]?t(e=>e.filter(e=>e!==a)):t(e=>[...e,a])},m=async()=>{try{console.log("me:",l);let e=await fetch("/api/users?username=".concat(o));if(!e.ok){n([]);return}let a=await e.json(),r=[];for(let e of a.users)"user"===l.role&&l.id!==e.id||r.some(t=>t.id===e.id)||r.push(e);console.log("users:",r),n(r);let s={};r.forEach((e,t)=>{s[t]=!0}),c(s),t(r.map(e=>e.id))}catch(e){n([])}};return(0,s.useEffect)(()=>{l&&m()},[o,l]),(0,r.jsxs)("div",{className:"listUsers",children:[(0,r.jsx)("h2",{className:"relative text-center",children:"Liste des utilisateurs"}),(0,r.jsx)(x.I,{type:"search",className:"w-[90%] m-auto",placeholder:"Rechercher un utilisateur",value:o,onChange:e=>i(e.target.value)}),(0,r.jsx)("div",{className:"list",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"user ".concat(d[t]?"active":""),style:{"--c":e.color},children:[(0,r.jsx)("p",{children:e.username}),(0,r.jsx)(g._,{htmlFor:"checkbox_".concat(t),children:(0,r.jsx)(x.I,{className:"w-[fit-content]",type:"checkbox",id:"checkbox_".concat(t),checked:d[t],onChange:()=>u(t,e.id)})})]},"user_".concat(t)))})]})},j=()=>{let{actualDate:e,setActualDate:t}=(0,s.useContext)(p.k),{leftBar:a}=(0,s.useContext)(p.k);return(0,r.jsxs)("div",{className:a?"LeftBar open":"LeftBar",children:[(0,r.jsx)(i,{type:"single",collapsible:!0,defaultValue:"item-1",children:(0,r.jsxs)(d,{value:"item-1",children:[(0,r.jsx)(c,{children:e?"".concat(e.toLocaleString("default",{month:"long"})," ").concat(e.getFullYear()):"Chargement..."}),(0,r.jsx)(u,{children:(0,r.jsx)(h,{mode:"single",selected:e,onSelect:e=>{if(e){let a=new Date;t(new Date(e.getFullYear(),e.getMonth(),e.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()))}},initialFocus:!0})})]})}),(0,r.jsx)(v,{})]})}},9261:function(e,t,a){"use strict";a.d(t,{MyCalendar:function(){return R}});var r=a(7437),s=a(2265),n=a(9376),l=a(6526),o=a(6110),i=a(5156),d=a(4508);let c=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...l}=e;return(0,r.jsx)(i.f,{ref:t,decorative:n,orientation:s,className:(0,d.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...l})});c.displayName=i.f.displayName;var u=a(5186);let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});m.displayName="Textarea";var f=a(9270),h=a(653);let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(f.fC,{ref:t,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-blue-500 data-[state=checked]:text-primary-foreground data-[state=checked]:border-blue-500",a),...s,children:(0,r.jsx)(f.z$,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(h.nQG,{className:"h-4 w-4"})})})});p.displayName=f.fC.displayName;var x=a(6815),g=a(2869),v=a(3911);let j=v.fC,y=v.ZA,w=v.B4,b=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(v.xz,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(v.JO,{asChild:!0,children:(0,r.jsx)(h.jnn,{className:"h-4 w-4 opacity-50"})})]})});b.displayName=v.xz.displayName;let N=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(h.g8U,{})})});N.displayName=v.u_.displayName;let D=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(h.v4q,{})})});D.displayName=v.$G.displayName;let C=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...l}=e;return(0,r.jsx)(v.h_,{children:(0,r.jsxs)(v.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,r.jsx)(N,{}),(0,r.jsx)(v.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(D,{})]})})});C.displayName=v.VY.displayName;let T=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a),...s})});T.displayName=v.__.displayName;let S=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(v.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(v.wU,{children:(0,r.jsx)(h.nQG,{className:"h-4 w-4"})})}),(0,r.jsx)(v.eT,{children:s})]})});S.displayName=v.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=v.Z0.displayName;let U=e=>{let{isOpen:t,onClose:a}=e,{ListUsers:n,setListUsers:i}=(0,s.useContext)(l.k),[d,c]=(0,s.useState)(""),[m,f]=(0,s.useState)("#000000"),[h,p]=(0,s.useState)(""),[v,j]=(0,s.useState)(""),[y,w]=(0,s.useState)(""),[b,N]=(0,s.useState)(!1),D=async()=>{try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,color:m})});if(!e.ok)throw Error("Erreur lors de la cr\xe9ation de l'utilisateur");let t=await e.json();p(t.tempPassword),j("Utilisateur cr\xe9\xe9 avec succ\xe8s"),N(!0),w(""),i([...n,{id:t.userId,username:d,color:m}])}catch(e){w("Erreur lors de la cr\xe9ation de l'utilisateur"),j("")}};return(0,r.jsx)(o.Vq,{open:t,onOpenChange:a,children:(0,r.jsxs)(o.cZ,{children:[(0,r.jsx)(o.fK,{children:(0,r.jsx)(o.$N,{children:"Cr\xe9er un nouvel utilisateur"})}),b?(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("p",{className:"text-green-500",children:v}),(0,r.jsxs)("p",{children:["Nom d'utilisateur : ",d]}),(0,r.jsxs)("p",{children:["Mot de passe temporaire : ",h]}),(0,r.jsx)(g.z,{onClick:()=>{h&&navigator.clipboard.writeText(h).then(()=>{alert("Mot de passe copi\xe9 dans le presse-papiers")})},className:"mt-4",children:"Copier le mot de passe"})]}):(0,r.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)(x._,{htmlFor:"username",children:"Nom d'utilisateur"}),(0,r.jsx)(u.I,{id:"username",name:"username",placeholder:"Nom d'utilisateur",value:d,onChange:e=>c(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)(x._,{htmlFor:"color",children:"Couleur"}),(0,r.jsx)(u.I,{id:"color",name:"color",type:"color",value:m,onChange:e=>f(e.target.value)})]}),y&&(0,r.jsx)("p",{className:"text-red-500",children:y})]}),(0,r.jsxs)(o.cN,{children:[(0,r.jsx)(g.z,{variant:"secondary",onClick:a,children:"Annuler"}),(0,r.jsx)(g.z,{onClick:D,children:"Cr\xe9er l'utilisateur"})]})]})]})})},k=e=>{let{event:t=null,heureAddEvent:a}=e,{actualEditDate:n,setActualDate:i,calendarView:d,me:f,ListUsers:h,isDialogOpen:v,setIsDialogOpen:N,hoursAddEvent:D}=(0,s.useContext)(l.k),k=e=>{if(!e)return"00:30";let[t,a]=e.split(":");return"".concat(((t+Math.floor((a+30)/60))%24).toString().padStart(2,"0"),":").concat(((a+30)%60).toString().padStart(2,"0"))},[M,I]=(0,s.useState)(f||{id:0,username:"Utilisateur inconnu",color:"#000"}),[_,F]=(0,s.useState)([f]),[z,R]=(0,s.useState)(!1),[Y,E]=(0,s.useState)([]),[O,A]=(0,s.useState)({}),B=h||[],[L,P]=(0,s.useState)(!1),[V,Z]=(0,s.useState)(!!t),[q,H]=(0,s.useState)((null==t?void 0:t.isFullDay)||!1),[J,G]=(0,s.useState)(t?t.startDate.split("T")[0]:n?new Date(n).toISOString().split("T")[0]:""),[K,$]=(0,s.useState)(t?t.startDate.split("T")[1].slice(0,5):D||"00:00"),[X,Q]=(0,s.useState)(t?t.endDate.split("T")[0]:n?new Date(n).toISOString().split("T")[0]:""),[W,ee]=(0,s.useState)(t?t.endDate.split("T")[1].slice(0,5):k(D)),[et,ea]=(0,s.useState)((null==t?void 0:t.address)||"");(0,s.useEffect)(()=>{G(n),Q(n)},[n]),(0,s.useEffect)(()=>{!t&&(a&&$(a),a&&ee(()=>k(a))),E(B.filter(e=>!_.some(t=>t.id===e.id)))},[n,B,_,t]);let er=e=>{$(e),es(e,W)},es=(e,t)=>{let[a,r]=e.split(":"),[s,n]=t.split(":"),l=60*a+r;if(60*s+n-l<30){let e=l+30;ee("".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")))}},en=e=>{ee(e)},el=e=>{let t=_.find(t=>t.id===e);F(_.filter(t=>t.id!==e)),E([...Y,t])},eo=async e=>{let t;e.preventDefault();let a=J||n,r=X||n;"month"===d&&(a=new Date(Date.UTC(new Date(J).getUTCFullYear(),new Date(J).getUTCMonth(),new Date(J).getUTCDate()+1,0,0,0,0)).toISOString().split("T")[0],r=new Date(Date.UTC(new Date(X).getUTCFullYear(),new Date(X).getUTCMonth(),new Date(X).getUTCDate()+1,0,0,0,0)).toISOString().split("T")[0]),t=z?_.map(e=>e.id).join("/"):M.id.toString();let s={title:e.target.title.value,description:e.target.description.value,startDate:"".concat(a,"T").concat(K,":00"),endDate:"".concat(r,"T").concat(W,":00"),isFullDay:q,userId:t,address:et},l=V?"/api/events/".concat(e.id):"/api/events";(await fetch(l,{method:V?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(i(new Date(a)),N(!1)):console.error("Erreur lors de ".concat(V?"la mise \xe0 jour":"l'ajout"," de l'\xe9v\xe9nement"))};return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Vq,{open:v,onOpenChange:N,children:(0,r.jsxs)(o.cZ,{children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsxs)(o.$N,{children:[V?"Modifier":"Ajouter"," un \xe9v\xe9nement"]}),(0,r.jsxs)(o.Be,{children:["Veuillez ",V?"mettre \xe0 jour":"remplir"," les d\xe9tails de votre \xe9v\xe9nement."]})]}),(0,r.jsxs)("form",{onSubmit:eo,children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{htmlFor:"title",children:"Titre"}),(0,r.jsx)("div",{className:"relative flex items-center",children:(0,r.jsx)(u.I,{id:"title",className:"pl-[4vh]",name:"title",placeholder:"Titre de l'\xe9v\xe9nement",defaultValue:(null==t?void 0:t.title)||"",required:!0})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{htmlFor:"address",children:"Adresse (facultatif)"}),(0,r.jsx)("div",{className:"relative flex items-center",children:(0,r.jsx)(u.I,{id:"address",className:"pl-[4vh]",name:"address",placeholder:"Adresse de l'\xe9v\xe9nement",value:et,onChange:e=>ea(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{htmlFor:"description",children:"Description"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(m,{id:"description",name:"description",placeholder:"Description de l'\xe9v\xe9nement (facultatif)",defaultValue:(null==t?void 0:t.description)||""})})]}),(0,r.jsx)(c,{}),(0,r.jsxs)("div",{children:["user"!==f.role&&(0,r.jsxs)("div",{className:"flex items-center justify-between w-full space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{id:"multipleUsers",checked:z,onCheckedChange:R}),(0,r.jsx)(x._,{htmlFor:"multipleUsers",children:"Mode groupe"})]}),(0,r.jsx)(g.z,{className:"createUser text-blue-500 hover:text-blue-700",onClick:e=>{e.preventDefault(),P(!0)},children:"+ Cr\xe9er un utilisateur"})]}),z?(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{children:"Utilisateurs"}),(0,r.jsxs)(j,{onValueChange:e=>{let t=B.find(t=>t.id===e);t&&!_.some(e=>e.id===t.id)&&(F([..._,t]),E(Y.filter(e=>e.id!==t.id)))},children:[(0,r.jsx)(b,{children:(0,r.jsx)(w,{children:"Ajouter des utilisateurs"})}),(0,r.jsx)(C,{children:(0,r.jsxs)(y,{children:[(0,r.jsx)(T,{children:"Utilisateurs"}),Y.map(e=>(0,r.jsx)(S,{value:e.id,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:e.color}}),e.username]})},e.id))]})})]}),(0,r.jsx)("div",{className:"userSelectedBox mt-2 flex w-full",children:_.map(e=>(0,r.jsxs)("div",{style:{borderColor:e.color,"--c":e.color},className:"selectedUser flex items-center space-x-2",children:[(0,r.jsx)("span",{children:e.username}),(0,r.jsx)(g.z,{className:"deleteUserSelected",onClick:()=>el(e.id),children:"X"})]},e.id))})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(x._,{htmlFor:"userSelect",children:"Utilisateur"}),(0,r.jsxs)(j,{value:null==M?void 0:M.id,onValueChange:e=>{let t=B.find(t=>t.id===e);t&&I(t)},children:[(0,r.jsx)(b,{children:(0,r.jsx)(w,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:(null==M?void 0:M.color)||"#000"}}),(null==M?void 0:M.username)||"S\xe9lectionner un utilisateur"]})})}),(0,r.jsx)(C,{children:(0,r.jsxs)(y,{children:[(0,r.jsx)(T,{children:"Utilisateurs"}),B.map(e=>(0,r.jsx)(S,{value:e.id,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:e.color}}),e.username]})},e.id))]})})]})]}),(0,r.jsx)(g.z,{className:"createUser text-blue-500 hover:text-blue-700",onClick:e=>e.preventDefault(),children:"Ajouter un intervenant ext\xe9rieur"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{id:"fullDay",checked:q,onCheckedChange:e=>H(!0===e)}),(0,r.jsx)(x._,{htmlFor:"fullDay",children:"Journ\xe9e enti\xe8re"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsx)(x._,{htmlFor:"startDate",children:"Date de d\xe9but"}),(0,r.jsx)(u.I,{id:"startDate",className:"col-span-3 w-[70%] justify-around mr-2",name:"startDate",type:"date",required:!0,value:J,onChange:e=>G(e.target.value)})]}),!q&&(0,r.jsx)("div",{children:(0,r.jsx)(u.I,{id:"startTime",name:"startTime",type:"time",required:!0,value:K,onChange:e=>er(e.target.value)})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsx)(x._,{htmlFor:"endDate",children:"Date de fin"}),(0,r.jsx)(u.I,{id:"endDate",className:"col-span-3 w-[70%] justify-around mr-2",name:"endDate",type:"date",required:!0,value:X,onChange:e=>Q(e.target.value),min:J})]}),!q&&(0,r.jsx)("div",{children:(0,r.jsx)(u.I,{id:"endTime",name:"endTime",type:"time",required:!0,value:W,onChange:e=>en(e.target.value),min:J===X?K:void 0})})]})]}),(0,r.jsxs)(o.cN,{children:[(0,r.jsx)(g.z,{variant:"secondary",onClick:()=>N(!1),children:"Annuler"}),(0,r.jsx)(g.z,{type:"submit",children:V?"Mettre \xe0 jour l'\xe9v\xe9nement":"Ajouter l'\xe9v\xe9nement"})]})]})]})}),(0,r.jsx)(U,{isOpen:L,onClose:()=>P(!1)})]})};var M=a(1033),I=a(2135),_=a(875);let F=()=>{let{actualDate:e,setActualDate:t,calendarView:a,setCalendarView:n}=(0,s.useContext)(l.k);return(0,r.jsxs)("div",{className:"topBarCallendar flex items-center p-6",children:[(0,r.jsxs)("div",{className:"left",children:[(0,r.jsx)(g.z,{onClick:()=>t(new Date),className:"btn btn-icon inDay",children:"Aujourd'hui"}),(0,r.jsx)(g.z,{variant:"secondary",onClick:()=>{"month"===a?t(new Date(new Date(e.setMonth(e.getMonth()-1)))):"week"===a?t(new Date(new Date(e.setDate(e.getDate()-7)))):"day"===a&&t(new Date(new Date(e.setDate(e.getDate()-1))))},className:"btn btn-icon",children:(0,r.jsx)(I.Z,{})}),(0,r.jsx)(g.z,{variant:"secondary",onClick:()=>{"month"===a?t(new Date(new Date(e.setMonth(e.getMonth()+1)))):"week"===a?t(new Date(new Date(e.setDate(e.getDate()+7)))):"day"===a&&t(new Date(new Date(e.setDate(e.getDate()+1))))},className:"btn btn-icon",children:(0,r.jsx)(_.Z,{})}),"month"===a&&(0,r.jsxs)("span",{className:"month",children:[["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][e.getMonth()]," ",e.getFullYear()]}),"week"===a&&(0,r.jsx)("span",{className:"week",children:(e=>{let t=new Date(e),a=t.getDay();t.setDate(t.getDate()+(0===a?-6:1-a));let r=new Date(t);r.setDate(t.getDate()+6);let s=e=>"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear());return"de ".concat(s(t)," au ").concat(s(r))})(e)}),"day"===a&&(0,r.jsx)("span",{className:"day",children:"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())})]}),(0,r.jsxs)("div",{className:"right",children:[(0,r.jsx)(g.z,{variant:"secondary",className:"btn-view ".concat("month"===a?"active":""),onClick:()=>n("month"),children:"Mois"}),(0,r.jsx)(g.z,{variant:"secondary",className:"btn-view ".concat("week"===a?"active":""),onClick:()=>n("week"),children:"Semaine"}),(0,r.jsx)(g.z,{variant:"secondary",className:"btn-view ".concat("day"===a?"active":""),onClick:()=>n("day"),children:"Jour"})]})]})},z=()=>(0,r.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,r.jsx)("div",{className:"spinner-border inline-block w-8 h-8 border-4 rounded-full",role:"status",children:(0,r.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),R=()=>{let{actualDate:e,setActualEditDate:t,calendarView:a,idUserList:o,ListUsers:i,listEvent:d,setListEvent:c,setMe:u,setIsDialogOpen:m,hoursAddEvent:f,setHoursAddEvent:h}=(0,s.useContext)(l.k),[p,x]=(0,s.useState)([]),[g,v]=(0,s.useState)(5),[j,y]=(0,s.useState)(!0),w=(0,s.useRef)(0),b=(0,n.useRouter)(),N=async()=>{let e=localStorage.getItem("token");if(!e){b.push("/login");return}try{let t=await fetch("/api/account/verify",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Token invalide ou expir\xe9");let a=await t.json();u(a.user),y(!1)}catch(e){b.push("/login")}};(0,s.useEffect)(()=>{N()},[]);let D=async e=>{let t,r;let s=new Date(e);if("month"===a){let e=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()+1,0);t=e.toISOString().split("T")[0],r=a.toISOString().split("T")[0]}else if("week"===a){let e=s.getDay(),a=new Date(s);a.setDate(s.getDate()+(0===e?-6:1-e));let n=new Date(a);n.setDate(a.getDate()+6),t=a.toISOString().split("T")[0],r=n.toISOString().split("T")[0]}else"day"===a&&(t=s.toISOString().split("T")[0],r=s.toISOString().split("T")[0]);let n=await fetch("/api/events?startDate=".concat(t,"&endDate=").concat(r));if(!n.ok)return console.error("Erreur lors de la r\xe9cup\xe9ration des \xe9v\xe9nements:",n.statusText),[];try{return await n.json()}catch(e){return console.error("Erreur lors du parsing JSON:",e),[]}},C=async(e,t)=>{try{let a=t.toISOString(),r=await fetch("/api/events/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:a})});if(!r.ok)throw Error("Erreur lors de la mise \xe0 jour de la date de l'\xe9v\xe9nement");return await r.json()}catch(e){console.error(e)}},T=async(e,t)=>{try{let a=await fetch("/api/events/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({debutAt:t})});if(!a.ok)throw Error("Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement");return await a.json()}catch(e){console.error(e)}},S=async e=>{let t=new Date,a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),1)),r=new Date(Date.UTC(e.getFullYear(),e.getMonth()+1,0)),s=(a.getUTCDay()+6)%7,n=42-(s+r.getUTCDate());for(;n>=7;)n-=7;let l=[];for(let t=1;t<=n;t++)l.push(new Date(Date.UTC(e.getFullYear(),e.getMonth()+1,t)));v((s+r.getUTCDate()+n)/7);let o=[],i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),0)).getUTCDate();for(let e=s;e>0;e--)o.push({day:i-e+1,isCurrentMonth:!1,events:[]});for(let a=1;a<=r.getUTCDate();a++){let r=a===t.getUTCDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear(),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),a));o.push({date:s,day:a,isCurrentMonth:!0,isToday:r,events:[]})}for(let e=1;e<=n;e++)o.push({day:e,isCurrentMonth:!1,events:[]});return o},U=async e=>{let t=[],a=new Date(e),r=new Date,s=a.getUTCDay();a.setUTCDate(a.getUTCDate()+(0===s?-6:1-s));for(let s=0;s<7;s++){let n=new Date(a);n.setUTCDate(a.getUTCDate()+s);let l=n.getUTCFullYear()===r.getUTCFullYear()&&n.getUTCMonth()===r.getUTCMonth()&&n.getUTCDate()===r.getUTCDate();t.push({date:n,day:n.getUTCDate(),isCurrentMonth:n.getUTCMonth()===e.getUTCMonth(),isToday:l,events:[]})}return t},I=async e=>{let t=new Date(e),a=new Date(t),r=new Date,s=a.getUTCFullYear()===r.getUTCFullYear()&&a.getUTCMonth()===r.getUTCMonth()&&a.getUTCDate()===r.getUTCDate();return[{date:t,day:t.getUTCDate(),isCurrentMonth:!0,isToday:s,events:[]}]},_=async e=>{switch(a){case"month":default:return S(e);case"week":return U(e);case"day":return I(e)}},R=e=>{let t=e.target.getBoundingClientRect();w.current=e.clientY-t.top},Y=e=>{e.preventDefault()},E=async(t,r)=>{let s=t.dataTransfer.getData("eventId");parseInt(t.dataTransfer.getData("oldDay"),10);let n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),r)),l=0,o=0;if("week"===a||"day"===a){let e=t.currentTarget.querySelector(".hours-container");if(e){let a=e.getBoundingClientRect(),r=Math.floor((t.clientY-a.top-w.current)/a.height*48);l=Math.floor(r/2),o=r%2*30}l>=24&&(l=0,o=0),l<0&&(l=0,o=0),o<0&&(o*=-1)}if(await C(s,n),"week"===a||"day"===a){let e=n.toISOString().split("T")[0]+"T".concat(l.toString().padStart(2,"0"),":").concat(o.toString().padStart(2,"0"),":00.000Z");await T(s,e)}B()},O=()=>{let e=[];for(let t=0;t<24;t++)e.push((0,r.jsxs)("div",{className:"flex flex-col border-t border-gray-300 h-[5vh]",children:[(0,r.jsx)("div",{className:"half-hour h-1/2 border-b border-gray-200"}),(0,r.jsx)("div",{className:"half-hour h-1/2"})]},"hour-".concat(t)));return e},A=async(r,s)=>{let n=null,l=null;if("month"!==a){if("week"===a||"day"===a){let e=s.currentTarget.querySelector(".hours-container");if(e){let t=e.getBoundingClientRect(),a=Math.floor((s.clientY-t.top)/t.height*48);n=Math.floor(a/2)+"",l=a%2*30+""}}let e="".concat(n.padStart(2,"0"),":").concat(l.padStart(2,"0"));await h(e),console.log(e)}let o=new Date(Date.UTC(e.getFullYear(),e.getMonth(),r.day)).toISOString().split("T")[0];await t(o),setTimeout(()=>m(!0),10)},B=async()=>{c(await D(e))};return((0,s.useEffect)(()=>{e&&_(e).then(x)},[e,a]),(0,s.useEffect)(()=>{B()},[e,a,o]),j)?(0,r.jsxs)("div",{className:"flex items-center justify-center h-screen",children:[(0,r.jsx)(z,{})," "]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"p-1 w-full h-full flex".concat("month"!==a?" overflow-x-hidden":""),children:["month"!==a&&(0,r.jsx)("div",{className:"listHeure w-[3rem] flex flex-col",children:(()=>{let e=[];for(let t=0;t<24;t++)e.push((0,r.jsx)("div",{className:"flex text-[.65rem] flex-col justify-center items-center h-[10vh] border-t border-gray-300",children:(0,r.jsxs)("div",{children:[t,":00"]})},"label-hour-".concat(t)));return e})()}),(0,r.jsxs)("div",{className:"flex relative w-full h-full flex-col",children:[(0,r.jsx)(F,{}),(0,r.jsx)("div",{className:"\n              ".concat("month"===a?"grid grid-cols-7 grid-rows-".concat(g):"","\n              ").concat("week"===a?"grid grid-cols-7":"","\n              ").concat("day"===a?"grid grid-cols-1":"","\n              gap-0 border border-gray-200 rounded-lg h-full flex-grow\n            "),children:p.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-100 flex flex-col ".concat(e.isCurrentMonth?"bg-white text-black":"bg-gray-100 text-gray-400"),onDragOver:Y,onDragStart:e=>R(e),onDrop:t=>E(t,e.day),onDoubleClick:t=>A(e,t),children:[(0,r.jsx)("div",{className:"dayNumber".concat(e.isToday?" inDay":""),children:e.day}),"month"===a&&(0,r.jsxs)("div",{className:"events-container mt-1 overflow-x-hidden max-h-[12vh]",children:[d.filter(t=>{let a=new Date(t.date),r=new Date(e.date),s=a.getUTCFullYear()===r.getUTCFullYear()&&a.getUTCMonth()===r.getUTCMonth()&&a.getUTCDate()===r.getUTCDate(),n=t.userId.split("/").map(e=>parseInt(e)).some(e=>o.includes(e));return s&&n}).slice(0,2).map((e,t)=>{let a=new Date(e.debutAt),s=i.filter(t=>t.id===parseInt(e.userId)),n=a.getUTCHours().toString().padStart(2,"0"),l=a.getUTCMinutes().toString().padStart(2,"0"),o=e.userId.split("/").map(e=>parseInt(e));return(0,r.jsx)(M.j,{style:{"--c":s[0].color},eventKey:e.id,event:e,formattedHour:n,formattedMinutes:l,eventIndex:t,className:"event".concat(e.fullDay?" fullDay":"").concat(o.length>1?" groupe":""," p-1 mb-1 rounded")},t)}),d.filter(t=>{let a=new Date(t.date),r=new Date(e.date),s=a.getUTCFullYear()===r.getUTCFullYear()&&a.getUTCMonth()===r.getUTCMonth()&&a.getUTCDate()===r.getUTCDate(),n=t.userId.split("/").map(e=>parseInt(e)).some(e=>o.includes(e));return s&&n}).length>2&&(0,r.jsxs)("div",{className:"more-events text-xs text-gray-500",children:["+",d.filter(t=>{let a=new Date(t.date),r=new Date(e.date),s=a.getUTCFullYear()===r.getUTCFullYear()&&a.getUTCMonth()===r.getUTCMonth()&&a.getUTCDate()===r.getUTCDate(),n=t.userId.split("/").map(e=>parseInt(e)).some(e=>o.includes(e));return s&&n}).length-2," autres"]})]}),"week"===a&&(0,r.jsxs)("div",{className:"hours-container flex-grow overflow-auto relative",children:[O(),(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:d.map((t,a)=>{let s=new Date(t.date),n=new Date(e.date);if(s.getUTCFullYear()===n.getUTCFullYear()&&s.getUTCMonth()===n.getUTCMonth()&&s.getUTCDate()===n.getUTCDate()&&o.includes(parseInt(t.userId))){let e=new Date(t.debutAt),s=new Date(t.finAt),n=i.filter(e=>e.id===parseInt(t.userId)),l=(e.getUTCHours()+e.getUTCMinutes()/60)*5,o=(s.getTime()-e.getTime())/36e5,d=e.getUTCHours().toString().padStart(2,"0"),c=e.getUTCMinutes().toString().padStart(2,"0"),u=t.userId.split("/").map(e=>parseInt(e));return(0,r.jsx)(M.j,{style:{top:"".concat(l,"vh"),height:"".concat(5*o,"vh"),zIndex:50-2*o,"--c":n[0].color},eventKey:t.id,event:t,formattedHour:d,formattedMinutes:c,eventIndex:a,className:"event".concat(u.length>1?" groupe":""," editable absolute left-0 w-full overflow-x-hidden"),heightEditable:t.fullDay?"":"true"},a)}})})]}),"day"===a&&(0,r.jsxs)("div",{className:"hours-container flex-grow overflow-auto relative",children:[O(),(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:d.map((t,a)=>{let s=new Date(t.date),n=new Date(e.date);if(s.getUTCFullYear()===n.getUTCFullYear()&&s.getUTCMonth()===n.getUTCMonth()&&s.getUTCDate()===n.getUTCDate()&&o.includes(t.userId)){let e=new Date(t.debutAt),s=new Date(t.finAt),n=i.filter(e=>e.id===t.userId),l=(e.getUTCHours()+e.getUTCMinutes()/60)*5,o=(s.getTime()-e.getTime())/36e5,d=e.getUTCHours().toString().padStart(2,"0"),c=e.getUTCMinutes().toString().padStart(2,"0");return(0,r.jsx)(M.j,{style:{top:"".concat(l,"vh"),height:"".concat(5*o,"vh"),"--c":n[0].color},eventKey:t.id,event:t,formattedHour:d,formattedMinutes:c,eventIndex:a,className:"event editable absolute left-0 w-full overflow-x-hidden",heightEditable:"true"},a)}})})]})]},t))})]}),(0,r.jsx)(k,{heureAddEvent:f})]})})}},5140:function(e,t,a){"use strict";a.d(t,{RightBar:function(){return u}});var r=a(7437),s=a(2265),n=a(6526),l=a(1033),o=a(2869),i=a(1047),d=a(4869),c=a(1399);let u=()=>{let{rightBar:e,setRightBar:t,idUserList:a,ListUsers:u,listEvent:m,calendarView:f}=(0,s.useContext)(n.k),[h,p]=(0,s.useState)([]),x=async()=>{if(e&&"number"==typeof e)try{let t=await fetch("/api/eventsForDay?eventId=".concat(e));if(!t.ok)throw Error("Erreur lors de la r\xe9cup\xe9ration des \xe9v\xe9nements");let a=await t.json();p(a)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des \xe9v\xe9nements :",e)}else p([])};return(0,s.useEffect)(()=>{x()},[e,m]),(0,s.useEffect)(()=>{"month"!==f&&t(!1)},[e,f]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:e?"RightBar open":"RightBar",children:[h.length>0?h.map((e,t)=>{let s=new Date(e.date),n=new Date(e.date),o=s.getUTCFullYear()===n.getUTCFullYear()&&s.getUTCMonth()===n.getUTCMonth()&&s.getUTCDate()===n.getUTCDate(),i=e.userId.split("/").map(e=>parseInt(e)).filter(e=>a.includes(e));if(o&&i.length>0){var d;let a=new Date(e.debutAt),s=i.map(e=>u.find(t=>t.id===e)),n=a.getUTCHours().toString().padStart(2,"0"),o=a.getUTCMinutes().toString().padStart(2,"0");return(0,r.jsx)(l.j,{style:{"--c":null===(d=s[0])||void 0===d?void 0:d.color},eventKey:e.id,event:e,formattedHour:n,formattedMinutes:o,eventIndex:t,className:"event listing ".concat(e.fullDay?"fullDay":""," p-1 mb-1 rounded")},t)}return null}):(0,r.jsxs)("div",{className:"noEvent",children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)("h2",{children:"Aucun \xc9v\xe9nement trouv\xe9"})]}),"month"==f&&(0,r.jsxs)(o.z,{variant:"secondary",className:"btnRightBar",onClick:()=>t(!e),children:[e&&(0,r.jsx)(d.Z,{}),!e&&(0,r.jsx)(c.Z,{})]})]})})}},4763:function(e,t,a){"use strict";a.d(t,{TopBar:function(){return y}});var r=a(7437);a(3145),a(6279);var s=a(2265),n=a(9376),l=a(6526),o=a(4295);a(2869);var i=a(3412),d=a(653),c=a(4508);let u=i.fC,m=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,s.forwardRef((e,t)=>{let{className:a,inset:s,children:n,...l}=e;return(0,r.jsxs)(i.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",a),...l,children:[n,(0,r.jsx)(d.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=i.fF.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=i.tu.displayName;let f=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(i.Uv,{children:(0,r.jsx)(i.VY,{ref:t,sideOffset:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});f.displayName=i.VY.displayName;let h=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(i.ck,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",a),...n})});h.displayName=i.ck.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:n,...l}=e;return(0,r.jsxs)(i.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(d.nQG,{className:"h-4 w-4"})})}),s]})}).displayName=i.oC.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(i.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(d.jXb,{className:"h-4 w-4 fill-current"})})}),s]})}).displayName=i.Rk.displayName;let p=s.forwardRef((e,t)=>{let{className:a,inset:s,...n}=e;return(0,r.jsx)(i.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...n})});p.displayName=i.__.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});x.displayName=i.Z0.displayName;var g=a(2369),v=a(7692);let j=e=>{let{...t}=e,{me:a}=(0,s.useContext)(l.k),o=(0,n.useRouter)();if(!a)return(0,r.jsx)("div",{children:"Chargement..."});let{username:i,color:d}=a;return(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{className:"btnProfil",style:{background:d},children:i.slice(0,2).toUpperCase()}),(0,r.jsxs)(f,{children:[(0,r.jsx)(p,{children:"Mon Compte"}),(0,r.jsx)(x,{}),(0,r.jsxs)(h,{className:"myProfil",onClick:()=>{o.push("/profil")},children:[(0,r.jsx)(g.Z,{})," Mon Profil"]}),(0,r.jsxs)(h,{className:"logOut",onClick:()=>{localStorage.removeItem("token"),o.push("/login")},children:[(0,r.jsx)(v.Z,{})," D\xe9connexion"]})]})]})},y=()=>{let{leftBar:e,setLeftBar:t}=(0,s.useContext)(l.k);return(0,n.useRouter)(),(0,r.jsxs)("div",{className:"topBar fixed top-0 left-0 z-10 bg-white w-full h-10 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center w-[30vh]",children:(0,r.jsx)("button",{className:"btn-menu",onClick:()=>t(!e),children:(0,r.jsx)(o.M1X,{})})}),(0,r.jsx)("div",{className:"mr-4",children:(0,r.jsx)(j,{})})]})}},2869:function(e,t,a){"use strict";a.d(t,{d:function(){return i},z:function(){return d}});var r=a(7437),s=a(2265),n=a(7053),l=a(7712),o=a(4508);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-500 text-primary-foreground shadow hover:bg-blue-600",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(i({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},6110:function(e,t,a){"use strict";a.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return i},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var r=a(7437),s=a(2265),n=a(9027),l=a(653),o=a(4508);let i=n.fC;n.xz;let d=n.h_;n.x8;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=n.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Pxu,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});h.displayName=n.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});p.displayName=n.dk.displayName},5186:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(7437),s=a(2265),n=a(4508);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},6815:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var r=a(7437),s=a(2265),n=a(6394),l=a(7712),o=a(4508);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,o.cn)(i(),a),...s})});d.displayName=n.f.displayName},6526:function(e,t,a){"use strict";a.d(t,{GlobalProvider:function(){return l},k:function(){return n}});var r=a(7437),s=a(2265);let n=(0,s.createContext)(),l=e=>{let{children:t}=e,[a,l]=(0,s.useState)(new Date),[o,i]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)("month"),[f,h]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[g,v]=(0,s.useState)(!0),[j,y]=(0,s.useState)([]),[w,b]=(0,s.useState)([]),[N,D]=(0,s.useState)([]),[C,T]=(0,s.useState)(null),[S,U]=(0,s.useState)([]),[k,M]=(0,s.useState)(null);return(0,s.useEffect)(()=>{l(new Date)},[]),(0,r.jsx)(n.Provider,{value:{actualDate:a,setActualDate:l,leftBar:o,setLeftBar:i,rightBar:d,setRightBar:c,calendarView:u,setCalendarView:m,isDialogOpen:f,setIsDialogOpen:h,actualEditDate:p,setActualEditDate:x,pageLoading:g,setPageLoading:v,calendar:j,setCalendar:y,idUserList:w,setIdUserList:b,ListUsers:N,setListUsers:D,listEvent:S,setListEvent:U,me:C,setMe:T,hoursAddEvent:k,setHoursAddEvent:M},children:t})}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(1994),s=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},6279:function(){}},function(e){e.O(0,[87,310,452,423,77,450,971,117,744],function(){return e(e.s=1819)}),_N_E=e.O()}]);