"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8802:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>g,routeModule:()=>D,serverHooks:()=>c,staticGenerationAsyncStorage:()=>w});var a={};n.r(a),n.d(a,{GET:()=>l,POST:()=>d});var r=n(3278),s=n(5002),o=n(4877),u=n(3524),i=n(1309);let p=new u.PrismaClient;async function l(e){let{searchParams:t}=new URL(e.url),n=t.get("startDate"),a=t.get("endDate");if(!n||!a)return i.NextResponse.json({error:"Les dates de d\xe9but et de fin sont requises"},{status:400});try{let e=await p.event.findMany({where:{OR:[{date:{gte:new Date(n),lte:new Date(a)}},{date:{gte:new Date(n),lte:new Date(a)}}]}});return i.NextResponse.json(e,{status:200})}catch(e){return i.NextResponse.json({error:"Erreur lors de la r\xe9cup\xe9ration des \xe9v\xe9nements"},{status:500})}}async function d(e){try{let{title:t,description:n,startDate:a,endDate:r,isFullDay:s,userId:o,address:u}=await e.json();if(!t||!a||!r||!o||a&&"Invalid Date"==a)return i.NextResponse.json({message:"Invalid data"},{status:400});let l=new Date(Date.UTC(new Date(a).getUTCFullYear(),new Date(a).getUTCMonth(),new Date(a).getUTCDate(),new Date(a).getHours(),new Date(a).getMinutes())),d=new Date(Date.UTC(new Date(r).getUTCFullYear(),new Date(r).getUTCMonth(),new Date(r).getUTCDate(),new Date(r).getHours(),new Date(r).getMinutes())),D=await p.event.create({data:{title:t,subtitle:n||"",date:new Date(Date.UTC(new Date(a).getUTCFullYear(),new Date(a).getUTCMonth(),new Date(a).getUTCDate(),0,0,0,0)),debutAt:l,finAt:d,fullDay:s,userId:o,address:u||null}});return i.NextResponse.json(D,{status:201})}catch(e){return console.error("Error creating event:",e),i.NextResponse.json({message:"Error creating event"},{status:500})}}let D=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/events/route",pathname:"/api/events",filename:"route",bundlePath:"app/api/events/route"},resolvedPagePath:"/Users/chghosts/Developpement/planningJs/app/api/events/route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:w,serverHooks:c}=D,v="/api/events/route";function h(){return(0,o.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:w})}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[379,833],()=>n(8802));module.exports=a})();