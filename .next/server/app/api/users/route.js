"use strict";(()=>{var e={};e.id=701,e.ids=[701],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},8180:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>x,routeModule:()=>h,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v});var s={};t.r(s),t.d(s,{GET:()=>d,POST:()=>m});var n=t(3278),a=t(5002),o=t(4877),u=t(3524),i=t(1309),p=t(3506),l=t.n(p);let c=new u.PrismaClient;async function d(e){let{searchParams:r}=new URL(e.url),t=r.get("username");try{let e;return e=t&&""!==t.trim()?await c.user.findMany({where:{username:{contains:t}}}):await c.user.findMany(),i.NextResponse.json({users:e},{status:200})}catch(e){return console.error("Erreur c\xf4t\xe9 serveur:",e),i.NextResponse.json({error:"Erreur lors de la r\xe9cup\xe9ration des utilisateurs ou des \xe9v\xe9nements"},{status:500})}}async function m(e){try{let{username:r,color:t}=await e.json();if(!r||!t)return i.NextResponse.json({error:"Le nom d'utilisateur et la couleur sont requis"},{status:400});let s=function(e=8){let r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let s=0;s<e;s++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}(),n=await l().hash(s,10),a=await c.user.create({data:{username:r,color:t,role:"user",temp_password:n}});return i.NextResponse.json({user:a,tempPassword:s},{status:201})}catch(e){return console.error("Erreur c\xf4t\xe9 serveur:",e),i.NextResponse.json({error:"Erreur lors de la cr\xe9ation de l'utilisateur"},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/users/route",pathname:"/api/users",filename:"route",bundlePath:"app/api/users/route"},resolvedPagePath:"/Users/chghosts/Developpement/planningJs/app/api/users/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:v,serverHooks:f}=h,g="/api/users/route";function w(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[379,833,506],()=>t(8180));module.exports=s})();